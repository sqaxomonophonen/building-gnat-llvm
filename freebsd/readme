
FreeBSD 14.1-RELEASE

I'm building with these git commit hashes:

  https://github.com/AdaCore/gnat-llvm.git -llvm commit fbd6a428d80d23f9bb1a764e535b27fa20ddd049
  git://gcc.gnu.org/git/gcc.git commit caa26905eaf79d4875136c8de9e881371e97fe90


gnat-llvm needs a patched llvm16: the patches in llvm16-patches/ should be
copied to /usr/ports/devel/llvm16/files before building llvm16:

 - They come from gnat-llvm.git:llvm/patches/*

 - Target paths have been fixed, and "patch-" prefix added to the filename, so
   that they're automatically applied when building


Use pkg "gnat12"
$ export PATH=$PATH:/usr/local/gnat12/bin


The patches in gnat-llvm.patch are fixes for gnat-llvm.git itself:

 - Force `llvm-interface/Makefile` to use `llvm-config16` (which is the
   convention for targeting a specific version with FreeBSD ports) instead of
   `llvm-config`

 - Use `#!/usr/bin/env bash` (more portable) instead of `#!/bin/bash`

 - Add `-gnatwU` to Ada/GNAT build switches. This supresses warnings about
   "unused stuff". This is necessary because there's "unused stuff" in the
   gcc.git commit hash I'm using, and it already compiles with `-gnatg` which
   is an internal mode meant for compiling the compiler; it is particularly
   strict since it treats warnings as errors (see "-gnatg" here:
   https://docs.adacore.com/gnat_ugn-docs/html/gnat_ugn/gnat_ugn/building_executable_programs_with_gnat.html)


Use `gmake` to build


try test.adb:
-- ./llvm-gcc --target=wasm32 -c -S -emit-llvm test.adb
-- ./llvm-gcc --target=wasm32 -c test.adb
function Test(X : Integer) return Integer is
begin
   return X * X;
end Test;
